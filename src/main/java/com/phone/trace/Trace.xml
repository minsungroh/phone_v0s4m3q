<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.phone.trace.TraceMapperInter">
  <insert id="create" parameterType="TraceVO">
    insert into trace(waybil, trace_state, tdate, agent, manager, manager_phone, content, payno)
    values(#{waybil}, #{trace_state}, ${tdate}, #{agent}, #{manager}, #{manager_phone}, #{content}, #{payno});
  </insert>

  <select id="list" resultType="TraceVO" parameterType="int">
    select traceno, waybil, trace_state, tdate, agent, manager, manager_phone, content, payno
    from trace
    where waybil=#{waybil}
  </select>
  
  <select id="read" resultType="TraceVO" parameterType="TraceVO">
    select t.traceno, t.waybil, t.trace_state, t.tdate, t.agent, t.manager, t.manager_phone, t.content, t.payno, p.payno, p.resive_post, p.resive_addr1, p.resive_addr2, p.resive_phone, p.resive_name, p.item, p.pcnt
    from trace t
    join payment p on t.payno = p.payno
    where t.waybil=#{waybil} and t.traceno=#{traceno}
  </select>
  
  <update id="update" parameterType="TraceVO">
    update trace
    set trace_state = #{trace_state}
    where traceno=#{traceno}
  </update>
  
  <delete id="delete" parameterType="int">
    delete from trace
    where traceno=#{traceno}
  </delete>
</mapper>